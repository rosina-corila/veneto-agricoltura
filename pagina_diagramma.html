<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mappa Mentale Dinamica Orizzontale</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            padding: 30px;
            color: #333;
            /* Abilita lo scroll orizzontale se necessario */
            overflow-x: auto; 
        }

        /* ---------------------------------- */
        /* Struttura Mappa Mentale (Albero)   */
        /* ---------------------------------- */

        #mindmap {
            list-style: none;
            padding-left: 0;
            margin: 0;
            display: flex; /* Flexbox per allineamento orizzontale dei rami di primo livello */
        }

        #mindmap ul {
            list-style: none;
            padding-left: 0;
            margin: 0;
            display: none; /* Inizialmente nascosto */
            /* Allineamento verticale per i sotto-rami */
            flex-direction: column; 
        }
        
        /* Contenitore del Nodo (LI) */
        #mindmap li {
            position: relative;
            padding: 20px 20px 20px 0; /* Spazio per la linea orizzontale */
            cursor: default;
            line-height: 1.4;
        }

        /* ---------------------------------- */
        /* Allineamento e Connessioni         */
        /* ---------------------------------- */
        
        /* I sotto-livelli sono allineati verticalmente */
        #mindmap li > ul {
            margin-top: 15px; 
            padding-left: 20px;
        }
        
        /* Stile per i sotto-livelli (i rami figli) */
        #mindmap li.has-children > ul {
            display: flex; /* I rami figli sono sempre visualizzati come flex container */
            flex-direction: column;
            
            /* Posizionamento dei figli a destra del nodo genitore */
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 100%; /* Inizia dopo la fine del nodo genitore */
            margin-left: 50px; /* Distanza tra genitore e figli */
        }
        
        /* Nasconde i figli se il nodo è collassato */
        .node-box:not(.expanded) + ul {
             display: none !important;
        }


        /* Linea di connessione orizzontale principale */
        .node-box::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -50px; /* Si estende nello spazio tra nodi */
            width: 50px;
            height: 2px;
            background-color: #999;
            z-index: 0;
            transform: translateY(-50%);
            pointer-events: none;
        }

        /* Rimuovi linea dal nodo radice */
        #mindmap > li > .node-box::after {
            right: -50px;
            width: 50px;
        }

        /* Linee verticali e orizzontali per i sotto-rami (L) */
        #mindmap li.branch-node::before {
            content: '';
            position: absolute;
            left: 0; /* Punto di partenza della linea L */
            top: 50%;
            width: 20px;
            height: 2px;
            background-color: #999;
            z-index: 1;
        }

        #mindmap li.branch-node::after {
            content: '';
            position: absolute;
            left: 20px; /* Allineato con la fine della linea orizzontale */
            top: 50%;
            width: 2px;
            background-color: #999;
            z-index: 1;
            transform: translateY(-50%);
            pointer-events: none;
        }
        
        /* Gestione linee verticali per i gruppi di figli */
        #mindmap li.has-children > ul::before {
            content: '';
            position: absolute;
            left: 20px; 
            top: 0;
            height: 100%;
            width: 2px;
            background-color: #999;
            z-index: 0;
        }
        
        #mindmap li.has-children > ul > li:first-child::before {
            /* Rimuove la linea sopra il primo figlio */
            height: 50%;
            top: 50%;
        }

        #mindmap li.has-children > ul > li:last-child::after {
            /* Rimuove la linea sotto l'ultimo figlio */
            height: 50%;
        }

        #mindmap li.has-children > ul > li.leaf-node:only-child::before,
        #mindmap li.has-children > ul > li.leaf-node:only-child::after {
             /* Gestione nodo singolo (solo un figlio) */
            content: none;
        }


        /* ---------------------------------- */
        /* Stile dei Box (Box Grafica)        */
        /* ---------------------------------- */

        .node-box {
            display: inline-block;
            background-color: #fff; 
            padding: 8px 15px;
            border-radius: 20px; /* Bordi arrotondati (Pill shape) */
            border: 2px solid transparent;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
            font-size: 14px;
            z-index: 2; /* Deve stare sopra le linee */
            position: relative;
        }
        
        .node-box:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transform: scale(1.05);
        }

        /* Stile Nodo Radice (Box Principale) */
        #mindmap > li > .node-box {
            background-color: #3f51b5; /* Blu scuro */
            color: white;
            border-color: #303f9f;
            font-size: 18px;
            font-weight: bold;
            border-radius: 5px; /* Box più quadrato per il radice */
        }

        /* Stile Nodi Intermedi (Box Secondari) */
        #mindmap > li > ul > li > .node-box {
             background-color: #ff9800; /* Arancione */
             color: white;
             border-color: #f57c00;
        }
        
        /* Stile Nodi Terziari (e oltre) */
        #mindmap ul ul .node-box {
            background-color: #4caf50; /* Verde */
            color: white;
            border-color: #388e3c;
        }
        
        /* Stile Nodi Foglia (Dettagli finali) */
        li.leaf-node .node-box {
            background-color: #e0f2f1; /* Verde chiaro */
            color: #004d40;
            border-color: #b2dfdb;
            font-size: 13px;
            cursor: default;
        }
        
        /* Indicatore di Espansione/Collasso (Freccia) */
        .node-box[data-has-children="true"]::before {
            content: '►'; 
            position: absolute;
            left: -15px; /* Posizionato a sinistra del box */
            top: 50%;
            transform: translateY(-50%);
            color: inherit;
            font-size: 10px;
            transition: transform 0.2s;
            cursor: pointer;
        }
        
        .node-box.expanded[data-has-children="true"]::before {
            content: '▼';
        }
        
        /* I nodi foglia non hanno frecce */
        li.leaf-node .node-box::before {
            content: '';
        }

    </style>
</head>
<body>

    <ul id="mindmap"></ul>

    <script>
        // Dati della Mappa Mentale (gli stessi della richiesta precedente)
        const mindMapData = [
          {
            name: "NotebookLM: Strumento AI per Ricerca e Appunti di Google",
            children: [
              {
                name: "Funzionalità Principali",
                children: [
                  {
                    name: "AI Consapevole del Contesto",
                    children: ["Domande e Risposte (Q&A)", "Riassunto (Summarization)", "Generazione di Idee (Brainstorming)", "Creazione/Bozza di Contenuti"],
                  },
                  {
                    name: "Ancoraggio alla Fonte (Source Grounding)",
                    children: ["Usa solo le tue fonti caricate", "Afferma di prevenire le allucinazioni", "Citazione e Collegamento alla Fonte"],
                  },
                  {
                    name: "Gestione Documenti",
                    children: ["Carica tipi di documento multipli (.pdf, .txt, Docs)", "Indicizzazione Automatica", "Supporta fino a 50 documenti per Notebook", "Organizzato in 'Notebooks'"],
                  },
                ],
              },
              {
                name: "Casi d'Uso Chiave",
                children: [
                  {
                    name: "Per Ricerca e Scrittura",
                    children: [
                      {
                        name: "Studenti e Accademici",
                        children: ["Revisioni Letterarie, Tesi, Tesine", "Consolidamento Appunti e Guide di Studio", "Estrazione di argomenti chiave"],
                      },
                      {
                        name: "Professionisti e Creativi",
                        children: ["Analisi di Rapporti/Documenti Legali", "Bozza di Contenuti Marketing/Creativi", "Giornalismo e Fact-Checking"],
                      },
                    ],
                  },
                ],
              },
              {
                name: "Vantaggi e Benefici",
                children: [
                  {
                    name: "Aumento della Produttività",
                    children: ["Sintesi più rapida delle informazioni", "Riduzione del tempo per la presa di appunti manuale"],
                  },
                  {
                    name: "Comprensione Migliorata",
                    children: ["Identificazione di connessioni e temi", "Riassunti contestualizzati"],
                  },
                ],
              },
              {
                name: "Tecnologia Sottostante",
                children: [
                  {
                    name: "Modello AI",
                    children: ["Gemini (o PaLM 2)"],
                  },
                  {
                    name: "Sicurezza e Privacy",
                    children: ["Le fonti caricate rimangono private"],
                  },
                ],
              },
            ],
          },
        ];

        function buildTree(data, parentElement) {
            data.forEach(item => {
                const li = document.createElement('li');
                
                const childrenArray = Array.isArray(item.children) ? item.children : [];
                const hasChildren = childrenArray.length > 0;
                
                const nodeBox = document.createElement('span');
                nodeBox.className = 'node-box';
                nodeBox.textContent = item.name || item; 
                nodeBox.setAttribute('data-has-children', hasChildren);
                
                li.appendChild(nodeBox);

                if (hasChildren) {
                    li.classList.add('has-children');
                    li.classList.add('branch-node');
                    
                    const ul = document.createElement('ul');
                    
                    // Toggle Logic
                    nodeBox.addEventListener('click', function(event) {
                        event.stopPropagation(); 
                        this.classList.toggle('expanded');
                    });

                    // Costruisce i figli ricorsivamente
                    buildTree(childrenArray, ul);
                    li.appendChild(ul);
                    
                    // Espande il nodo radice all'inizio
                    if (parentElement.id === 'mindmap') {
                         nodeBox.classList.add('expanded');
                    }
                } else {
                    li.classList.add('leaf-node');
                }

                parentElement.appendChild(li);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const mindmapContainer = document.getElementById('mindmap');
            buildTree(mindMapData, mindmapContainer);
        });
    </script>
</body>
</html>
